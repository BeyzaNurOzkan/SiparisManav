@using Entity

@{
    Layout = "~/Views/Shared/_Layout.cshtml";

    List<Branch> branches = Query.Branches();


    List<BranchFormat> branchFormats = Query.getBranchFormat();
    List<Region> regions = Query.getRegion();



}

<div class="kt-content  kt-grid__item kt-grid__item--fluid" id="kt_content" style="padding-top: 5%;">
    <div class="kt-portlet kt-portlet--mobile">
        <div class="kt-portlet__head kt-portlet__head--lg pr-2 mr-2" style="min-height: 40px; justify-content: left; ">
            <div class="row pt-2 mt-2 pb-2 mb-2">
                <div class="col-lg-2 kt-portlet__head-label">
                    <span class="kt-portlet__head-icon">
                        <i class="flaticon-list"></i>
                    </span>
                    <h5 class="kt-subheader__title">
                        Sipariş Raporu 
                    </h5>
                </div>
                <div class="col-sm-3 mt-2 mb-2" style=" align-self: center; ">
                    <div class="input-group date" style="width:100%;">
                        <a class="btn btn-sm btn-clean btn-icon btn-icon-md" title="Geri" style="cursor: pointer;" id="btnDatetimeLeft" value="" onclick="ChangeDatePlus2(0)">
                            <i class="icon-2x flaticon2-back"></i>
                        </a>
                        <span id="kt_datepicker_3" class="input-group-text" style="width: 60%; align-items: normal; padding: inherit; border: 1px solid #0049ff;">
                            <input name="dateTimeforSOR" type="text" class="form-control" id="kt_datepicker_21" readonly placeholder="" value="" style=" font-size: 12px; color: red; text-align: center;" />
                            <span class="input-group-append">
                                <span class="input-group-text">
                                    <i class="la la-calendar-check-o"></i>
                                </span>
                            </span>
                        </span>
                        <a class="btn btn-sm btn-clean btn-icon btn-icon-md" style="cursor: pointer;" title="İleri" id="btnDatetimeRight" value="" onclick="ChangeDatePlus2(1)">
                            <i class="icon-2x pl-2 pr-0 flaticon2-next"></i>
                        </a>
                    </div>
                </div>
                @*<div class="col-sm-4 mt-2 mb-2 pr-5" style=" align-self: center; ">
                    <div class="row">
                       
                        <div class="col-lg-9">
                            <select id="RegionsSelect" class="custom-select form-control" style="color: red; font-weight: bold; width: 93%; " name="branchForRegionsSelect">
                                <option selected value="0">Bölge Seçiniz</option>

                                @foreach (var item in regions.Where(q => q.IsDeleted == false))
                                {
                                    <option value="@item.ID">@item.Name.ToUpper()</option>
                                }
                            </select>
                        </div>
                    </div>
                </div>*@
                @*<div class="col-sm-3 mt-2 mb-2">
                    <div class="row">
                        
                        <div class="col-lg-9 pt-1" style=" align-items: center;">
                            <select id="FormatSelect" class="custom-select form-control" name="BranchCode" style="color: red; font-weight: bold; ">
                                <option selected value="0">Format Seçiniz</option>

                                @foreach (var item in branchFormats.Where(q => q.Visible == true))
                                {
                                    <option value="@item.ID">@item.FormatName.ToUpper()</option>
                                }
                            </select>
                        </div>
                    </div>
                </div>*@
            </div>
        </div>
        <div class="kt-portlet kt-portlet--mobile pt-2">

            <div class="kt-portlet__body">
                <!--begin: Datatable -->
                <table class="table table-striped- table-bordered table-hover table-checkable display" id="product_Horizontal">
                    <thead>
                        <tr style="height:110px; width:1px;">
                            <th style="vertical-align: bottom;">S/N</th>
                            <th style="vertical-align: bottom;">Barkod</th>
                            <th style="vertical-align: bottom;">Ürün Adı</th>
                            <th style="vertical-align: bottom;"></th>
                            <th style="vertical-align: bottom;"></th>
                            <th style="vertical-align: bottom;">Birim</th>
                            <th style="vertical-align: bottom;">Toplam</th>
                            @foreach (var item in branches.Where(z=>z.isMaster==false && z.Visible==true).Take(15))
                            {
                                <th style="vertical-align:bottom;text-align:-webkit-center;"><div class="rotate90 " style="writing-mode: vertical-lr; font-size: 11px; "><span>@item.BranchName</span></div></th>
                            }
                        </tr>
                    </thead>
                    <tfoot align="right">
                        <tr>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th></th>

                            @foreach (var item in branches.Where(z => z.isMaster == false && z.Visible == true).Take(15))
                            {
                                <th></th>
                            }
                        </tr>
                    </tfoot>
                </table>
                <!--end: Datatable -->
            </div>
        </div>
    </div>
</div>
<div class="modal fade " id="OpenStateOrderRepModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header" style="background-color:#003366;">
                <h5 class="modal-title" style="color:white;" id="ProductTitleName">Sipariş Bilgileri</h5>
                <button type="button" style="color:white;" class="close" data-dismiss="modal" aria-label="Close">
                </button>
            </div>
            <div class="modal-body pb-0 mb-0">
                <div class="kt-portlet kt-portlet--tabs">
                    <div class="kt-portlet kt-portlet--mobile pt-2">

                        <div class="kt-portlet__body">
                            <!--begin: Datatable -->
                            <table class="table table-striped- table-bordered table-hover table-checkable display" id="modal_order">
                                <thead>
                                    <tr>
                                        <th>S/N</th>
                                        <th>Sipariş No</th>
                                        <th>Şube Adı</th>
                                        <th>Ürün Adı</th>
                                        <th>Sipariş Miktarı</th>
                                        <th>Eldeki Stok</th>

                                        <th>Açıklama</th>
                                    </tr>
                                </thead>
                            </table>
                            <!--end: Datatable -->
                        </div>
                    </div>

                    <div class="modal-footer" style="justify-content:left;width: 100%; ">
                        <div class="row" style="width:100%;">
                            <div class="col-12" style="text-align:right;" id="AddButtonModal">

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<script src="./assets/vendors/general/jquery/dist/jquery.js" type="text/javascript"></script>
@*<script src="https://cdn.datatables.net/rowgroup/1.1.2/js/dataTables.rowGroup.js"></script>*@
<script>
    $(document).ready(function () {
        UTCToday();
    });
</script>
<script>
    $(document).ready(function () {
        debugger
        var dateID = $('#kt_datepicker_3').val();
        //var region = $('#RegionsSelect').val();
        //var format = $('#FormatSelect').val();
        getProductsReportHorizontal(dateID/*, format, region*/);
    });
</script>


