@using Entity

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    List<ProductGroup> productGroups = Query.ProductGroups();

    int id = 0;
    if (TempData["groupId"] != null)
    {
        id = (int)TempData["groupId"];
    }
    if (id == 0)
    {
        id = productGroups.First().ID;
    }

    List<Product> products = Query.Product();
    List<ProductGroup2> productGroups2 = Query.ProductGroup2s(id);
    List<ProductGroup3> productGroups3 = Query.ProductGroup3s();
    User CurrentUser = Session["CurrentUser"] as User;
    List<BranchFormat> branches = Query.getBranchFormat();
    int i = 0;
    int k = 0;
}

<div class="kt-content  kt-grid__item kt-grid__item--fluid" id="kt_content" style="padding-top: 5%;">
    <form class="kt-form kt-form--label-right" method="post">
        <div class="kt-portlet kt-portlet--mobile">
            <div class="kt-portlet__head kt-portlet__head-label center">
                <div class="kt-portlet__head--lg" style="align-self: center;">
                    <div class="row pt-2 mt-2 mb-2 pb-2">
                        <div class="kt-portlet__head-label col-lg-2">
                            <span class="kt-portlet__head-icon">
                                <i class="flaticon-list"></i>
                            </span>
                            <h5 class="kt-subheader__title">
                                Kapasite Tanımları
                            </h5>
                        </div>
                        <div class="col-lg-1 pt-1 pr-0 mr-0 ml-0 pl-0" style="align-self: center; text-align: right; ">
                            <label class="header">
                                Format Seçiniz:
                            </label>
                        </div>
                        <div class="col-lg-2 pt-1" style=" align-items: center;">
                            <select id="branchFormat" class="custom-select form-control" name="BranchCode" style="color: red; font-weight: bold; ">

                                @foreach (var item in branches)
                                {
                                    <option value="@item.ID">@item.FormatName.ToUpper()</option>
                                }
                            </select>
                        </div>
                        <div class="col-lg-1 pt-1 pr-0 mr-0 ml-0 pl-0" style="align-self: center; text-align: right; ">
                            <label class="header">
                                Kategori Seçiniz:
                            </label>
                        </div>
                        <div class="col-lg-2 pt-1" style=" align-items: center;">
                            <select id="categoryForOrder1" class="custom-select form-control" name="CategoryForOrder1">
                                @foreach (var item in productGroups)
                                {
                                    <option value="@item.ID">@item.Name</option>
                                }
                            </select>
                        </div>
                        <div class="col-lg-4  mt-1" style=" text-align: right; ">
                            <a class="btn btn-info" href="/Branch/FormatDefinitions">
                                <i class="la la-save"></i>
                                Mağaza Formatları
                            </a>
                            <a class="btn btn-warning" onclick="ReloadCapacity()">
                                <i class="la la-save"></i>
                                Kaydet
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="kt-portlet__body pt-0 pl-0 pr-0 mr-0 ml-0" id="newOrder">
                <!--begin: Datatable -->

                <div class="kt-content  kt-grid__item kt-grid__item--fluid pt-0 pl-0 pr-0 mr-0 ml-0" id="tablistdiv">

                    <ul class="nav nav-pills mb-0 pl-0" role="tablist" id="tablistul">
                        <!-- Ajax ile dolduruluyor -->
                    </ul>

                    <div class="tab-content mt-0" id="myTabContent">
                        @foreach (var items in productGroups2)
                        {
                            if (k == 0)
                            {
                                <div class="tab-pane fade active show" id="@items.Name" role="tabpanel" aria-labelledby="kt_tab_pane_2">
                                    <div class="kt-content  kt-grid__item kt-grid__item--fluid pt-2 mt-2" id="kt_content">
                                        <table class="table table-striped- table-bordered table-hover table-checkable" id="table1_">
                                            <thead>
                                                <tr>
                                                    <th>S/N</th>
                                                    <th>Ürün Grubu</th>
                                                    <th>Barkodu</th>
                                                    <th>Ürün Adı</th>
                                                    <th>Kapasite</th>
                                                    <th>Sipariş Birimi</th>
                                                    <th>Sipariş Katsayısı</th>
                                                    @*<th>Açıklama</th>*@
                                                </tr>
                                            </thead>
                                        </table>
                                    </div>
                                </div>
                            }
                            else
                            {
                                <div class="tab-pane fade" id="@items.Name" role="tabpanel" aria-labelledby="kt_tab_pane_2">
                                    <div class="kt-content  kt-grid__item kt-grid__item--fluid pt-2 mt-2" id="kt_content">
                                        <table class="table table-striped- table-bordered table-hover table-checkable" id="table1_@items.ID">
                                            <thead>
                                                <tr>
                                                    <th>S/N</th>
                                                    <th>Ürün Grubu</th>
                                                    <th>Barkodu</th>
                                                    <th>Ürün Adı</th>
                                                    <th>Kapasite</th>
                                                    <th>Sipariş Birimi</th>
                                                    <th>Sipariş Katsayısı</th>
                                                    @*<th>Açıklama</th>*@
                                                </tr>
                                            </thead>
                                        </table>
                                    </div>
                                </div>
                            }
                            k++;
                        }
                        <div class="tab-pane fade" id="Capacity" role="tabpanel" aria-labelledby="profile-tab">
                            <!--Begin: Kapasite Durum-->
                            deneme
                            <!--End: Kapasite Durum-->
                        </div>
                        <div class="tab-pane fade" id="OrderBrief" role="tabpanel" aria-labelledby="profile-tab">
                            <!--Begin: Sipariş Özet-->
                            <div class="kt-content  kt-grid__item kt-grid__item--fluid" id="kt_content">
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="kt-portlet">
                                            <div class="kt-portlet__body kt-portlet__body--fit">
                                                <div class="kt-invoice-2">
                                                    <div class="kt-invoice__wrapper">
                                                        <div class="kt-invoice__head">
                                                            <div class="kt-invoice__container kt-invoice__container--centered">
                                                                <div class="kt-invoice__logo pt-5">
                                                                    <a>
                                                                        <h1>
                                                                            Günlük Sipariş
                                                                        </h1>
                                                                        <h4 style="color: #002952">
                                                                            Bakırköy
                                                                        </h4>
                                                                    </a>
                                                                    <a target="_blank" href="https://www.tanzimmarket.com/">
                                                                        <img style="width:80%" src="./assets/media/company-logos/logo_client_color.png">
                                                                    </a>
                                                                </div>
                                                                <span class="kt-invoice__desc pb-2">
                                                                    <span>Merkez, Alan Sk. 36/5, 34406 </span>
                                                                    <span>Kâğıthane/İstanbul</span>
                                                                </span>
                                                                <div class="kt-invoice__items pt-5">
                                                                    <div class="kt-invoice__item">
                                                                        <span class="kt-invoice__subtitle">TARİH</span>
                                                                        <span class="kt-invoice__text">28.05.2021</span>
                                                                    </div>
                                                                    <div class="kt-invoice__item">
                                                                        <span class="kt-invoice__subtitle">SİPARİŞ NO</span>
                                                                        <span class="kt-invoice__text">003366</span>
                                                                    </div>
                                                                    <div class="kt-invoice__item">
                                                                        <span class="kt-invoice__subtitle">TESLİMAT ADRESİ</span>
                                                                        <span class="kt-invoice__text">
                                                                            Merkez, Alan Sk. 36/5, 34406 <br>
                                                                            Kâğıthane/İstanbul
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="kt-invoice__body kt-invoice__body--centered">
                                                            <div class="table-responsive">
                                                                <table class="table">
                                                                    <thead>
                                                                        <tr>
                                                                            <th>Ürün Grubu</th>
                                                                            <th>Ürün Kodu</th>
                                                                            <th>Ürün Adı</th>
                                                                            <th>Birim</th>
                                                                            <th>Sipariş Miktarı</th>
                                                                            <th>Stok Miktarı</th>
                                                                            <th>Kapasite</th>
                                                                            <th>Sipariş Kontrol</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <tr>
                                                                            <td>Creative Design</td>
                                                                            <td>80</td>
                                                                            <td>Creative Design</td>
                                                                            <td>80</td>
                                                                            <td>Creative Design</td>
                                                                            <td>80</td>
                                                                            <td>$40.00</td>
                                                                            <td class="kt-font-danger">$3200.00</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td>Creative Design</td>
                                                                            <td>80</td>
                                                                            <td>Creative Design</td>
                                                                            <td>80</td>
                                                                            <td>Creative Design</td>
                                                                            <td>80</td>
                                                                            <td>$40.00</td>
                                                                            <td class="kt-font-danger">$3200.00</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td>Creative Design</td>
                                                                            <td>80</td>
                                                                            <td>Creative Design</td>
                                                                            <td>80</td>
                                                                            <td>Creative Design</td>
                                                                            <td>80</td>
                                                                            <td>$40.00</td>
                                                                            <td class="kt-font-danger">$3200.00</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td>Creative Design</td>
                                                                            <td>80</td>
                                                                            <td>Creative Design</td>
                                                                            <td>80</td>
                                                                            <td>Creative Design</td>
                                                                            <td>80</td>
                                                                            <td>$40.00</td>
                                                                            <td class="kt-font-danger">$3200.00</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td>Creative Design</td>
                                                                            <td>80</td>
                                                                            <td>Creative Design</td>
                                                                            <td>80</td>
                                                                            <td>Creative Design</td>
                                                                            <td>80</td>
                                                                            <td>$40.00</td>
                                                                            <td class="kt-font-danger">$3200.00</td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </div>
                                                        <div class="kt-invoice__footer">
                                                            <div class="kt-invoice__table  kt-invoice__table--centered table-responsive">
                                                                <table class="table">
                                                                    <thead>
                                                                        <tr>
                                                                            <th>BANK</th>
                                                                            <th>ACC.NO.</th>
                                                                            <th>DUE DATE</th>
                                                                            <th>TOTAL AMOUNT</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <tr>
                                                                            <td>BARCLAYS UK</td>
                                                                            <td>12345678909</td>
                                                                            <td>Jan 07, 2018</td>
                                                                            <td class="kt-font-danger">20,600.00</td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!--End: Sipariş Özet-->
                        </div>

                    </div>
                </div>
                <!--end: Datatable -->
            </div>
        </div>
    </form>
</div>





<select id="groupIds" style="visibility:hidden;">
    @foreach (var group in productGroups)
    {
        foreach (var subGrup in productGroups2.Where(x => x.ProductGroups.ID == group.ID))
        {
            <option value="@subGrup.ID"></option>
        }
    }
    @CurrentUser.CurrentBranch
</select>

<script src="./assets/vendors/general/jquery/dist/jquery.js" type="text/javascript"></script>
<script>
    $(document).ready(function () {
        fillPanelTab(10);
        var branchFormatID = $('#branchFormat').val();
        var id = $('#categoryForOrder1').val();
        getCapacityProducts(id, branchFormatID);

    });
</script>

<script>
    $(document).ready(function () {
        var id = $('#categoryForOrder1').val();
        getCategoryForOrder1(id);
    });
</script>





@*<script src="~/assets/Deneme/js/handleCounter.js"></script>
    <script src="~/assets/Deneme/jquery.bootstrap-touchspin.js"></script>
    <script src="~/assets/Deneme/jquery.bootstrap-touchspin.min.js"></script*@